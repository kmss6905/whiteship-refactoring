### 리팩토링 공부 공간 🔥

---
#### 냄새1. 이해하기 힘든 이름
* 깔끔한 코드에서 가장 중요한 것 중 하나가 바로 "좋은 이름"이다.
* 함수, 변수, 클래스, 모듈의 이름 들 모두 어떤 역할을 하는지 어떻게 쓰이는 지 직관적이어야 한다.
* 사용할 수 있는 리팩토링 기술
  * 함수 선언 변경하기
  * 변수 이름 바꾸기
    * 더 많이 사용되는 변수일수록 그 이름이 더 중요하다.
      * 람다식에서 사용하는 변수 vs 함수의 매개변수
    * 다이나믹 타입을 지원하는 언어에서는 타입을 이름에 넣기도 한다.
    * 여러 함수에 걸쳐 쓰이는 필드 이름에는 더 많이 고민하고 이름을 짓는다.
  * 필드 이름 바꾸기
    * Record 자료 구조의 필드 이름은 프로그램 전반에 걸쳐 참조도리 수 있기 때문에 매우 중요하다.
      * Recode 자료구조 : 특정 데이터와 관련있는 필드를 묶어 놓은 자료구조
      * 파이썬의 Dictionary, 또는 줄여서 dicts
      * C# 의 Record
      * 자바 14 버전부터 지원(record 키워드)
      * 자바에서는 Getter 와 Setter 메소드의 이름도 필드의 이름과 비슷하게 간주할 수 있다.


---
#### 냄새2. 중복코드
* 중복 코드의 단점
  * 비슷한지, 완전히 동일한 코드인지 주의 깊게 봐야한다.
  * 코드를 변경할 때, 동일한 모든 곳의 코드를 변경해야 한다.
* 사용할 수 있는 리팩토링 기술
  * 동일한 코드를 여러 메소드에서 사용하는 경우, 함수 추출하기(Extract Function)
    * *"의도" 와 "구현" 분리하기*
    * 무슨 일을 하는 코드인지 알아내려고 노력해야 하는 코드라면 해당 코드를 함수로 분리하고 함수 이름으로 "무슨 일을 하는지" 표현할 수 있다.
    * *한줄 짜리 메소드도 괜찮은가?*  -> 저자는 OK, 의도를 잘 들어낼 수 있다면!
    * 거대한 함수 안에 들어있는 주석은 추출한 함수를 찾는 데 있어서 좋은 단서가 될 수 있다/
  * 코드가 비슷하게 생겼지만 완전히 같지는 않은 경우, 코드 분리하기(Slide Statements)
    * 관련있는 코드끼리 묶여있어야 코드를 더 쉽게 이해할 수 있다.
    * 함수에서 사용할 변수를 상단에 미리 정의하기 보다는, 해당 변수를 사용하는 코드 바로 위에 선언하자.
    * 관련있는 코드끼리 묶은 다음, 함수추출하기를 사용해서 더 깔끔하게 분리할 수 있다.
  * 여러 하위 클래스에 동일한 코드가 있다면, 메소드 올리기(Pull Up Method)
---
#### 냄새3. 긴 함수
* 임시 변수를 질의 함수로 바꾸기
  * 임시 변수를 만드는 표현식을 함수로 빼라(해당 표현식 자체에 의미를 부여한다.)
  * 변수를 사용하면 반복해서 동일한 식을 계산하는 것을 피할 수 있고, 이름을 사용해 의미를 표현할 수도 있다.
  * 긴 함수를 리팩토링할 때, 그러한 임시 변수를 함수로 추출하여 분리다면 빼낸 함수로 전달해야 할 매개변수를 줄일 수 있다.
* 매개변수 객체 만들기
  * 같은 매개변수 들이 여러 메소드에 걸쳐 나타난다면 그 매개변수들을 묶은 자료 구조를 만들 수 있다.
  * 그렇게 만든 자료구조는:
    * 해당 데이터간의 관계를 보다 명시적으로 나타낼 수 있다.
    * 함수에 전달할 매개변수 개수를 줄일 수 있다.
    * 도메일을 이해하는 데 중요한 역할을 하는 클래스로 발전할 수도 있다.
* 객체 통째로 넘기기
  * 어떤 한 레코드에서 구할 수 있는 여러 값들을 함수에 전달하는 경우, 해당 매개변수를 레코드 하나로 교체할 수 있다.
  * 매개변수 목록을 줄일 수 있다.(향후에 추가할지도 모를 매개변수까지도 ...)
  * 이 기술을 적용하기 전에 의존성을 고려해야 한다.
  * 어쩌면 해당 메소드의 위치가 적절하지 않을 수도 있다. (기능 편애 "Feature Envy" 냄새에 해당한다.)
* 함수를 명령으로 바꾸기(커멘드 패턴)
  * 함수를 독립적인 객체인, Command로 만들어 사용할 수 있다.
* 조건문 분해하기
  * 여러 조건에 따라 달라지는 코드를 작성하다보면 종종 긴 함수가 만들어지는 것을 목격할 수 있다.
  * **"조건"과 "액션" 모두 "의도"를 표현해야한다.**
  * 기술적으로는 "함수 추출하기"와 동일한 리팩토링이지만 의도만 다를 뿐이다.
* 반복문 쪼개기
  * 하나의 반복문에서 여러 다른 작업을 하는 코드를 쉽게 찾아볼 수 있다.
  * 해당 반복문을 수정할 때 여러 작업을 모두 고려하며 코딩을 해야한다.
  * 성능문제를 야기할 수 있지만, "리팩토링"은 "성능 최적화"와 별개의 작업이다. 리팩토링을 마친 이후에 성능 최적화 시도할 수 있다.
 
